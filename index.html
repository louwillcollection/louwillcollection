<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Segmented Sphere Visualization</title>
  <style>
    body { margin: 0; padding: 0; overflow: hidden; background: white; font-family: Arial, sans-serif; }
    #canvas-container { position: absolute; width: 100%; height: 100%; }
    #controls { position: absolute; bottom: 20px; left: 0; right: 0; display: flex; justify-content: center; }
    #toggle-button { padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
    #data-panel { position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); width: 80%; max-width: 500px; max-height: 300px; overflow-y: auto; background: white; border: 1px solid #ddd; border-radius: 4px; padding: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: none; }
    #search { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
    #data-list { list-style-type: none; padding: 0; margin: 0; }
    #data-list li { padding: 8px; border-bottom: 1px solid #eee; cursor: pointer; }
    #data-list li:hover { background: #f5f5f5; }
    #data-list li:last-child { border-bottom: none; }
  </style>
</head>
<body>
  <div id="canvas-container"></div>
  <div id="controls">
    <button id="toggle-button">Show Data List</button>
  </div>
  <div id="data-panel">
    <input type="text" id="search" placeholder="Search data...">
    <ul id="data-list"></ul>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
  <script>
    // ================= Data List =================
    const dataList = [
      "Australian National University - williamlouise215",
      "Bandung Institute of Technology - williamlouise513",
      "California Institute of Technology - ignatiusischyrion",
      "Columbia University - louwillthefirst",
      "Cornell University - lw080907",
      "Fudan University - verethragnazoroastrian",
      "Gadjah Mada University - louisewilliamresearch",
      "Harvard University - dimitrideodatus",
      "Imperial College London - basiliusaloysius",
      "Johns Hopkins University - qasimdostoevsky",
      "King's College London - williamlouise087",
      "Massachusetts Institute of Technology - aaronlouwill",
      "McGill University - theresavanhindenburg",
      "Monash University - williamlouise624",
      "Nanyang Technological University - kolamloak",
      "National University of Singapore - guoruyi08",
      "Paris Sciences et Lettres University - ulyssesulyanov",
      "Peking University - louisewilliamcontact",
      "Princeton University - reveriusredemptus",
      "Stanford University - censuriuscharlemagne",
      "Swiss Federal Institute of Technology in Lausanne - oceanusophiuchus",
      "Swiss Federal Institute of Technology in Zurich - flaviusfacio",
      "Tarumanagara University - louwilluntarian",
      "Technical University of Munich - polycarpusperegrinus",
      "The Chinese University of Hong Kong - williamlouise482",
      "The University of Edinburgh - williamlouise487",
      "The University of Hong Kong - jonatusjarlath",
      "The University of Manchester - williamlouise562",
      "The University of Melbourne - mailliwesiuolalfa",
      "The University of Melbourne - mailliwesiuolalfa",
      "The University of New South Wales - mailliwesiuolder",
      "The University of Sydney - stanislavsylvester",
      "The University of Tokyo - williamlouise72",
      "Tsinghua University - mailliwesiuol.01",
      "University College London - hippolytushonoratus",
      "University of California Berkeley - mailliwesiuol.02",
      "University of Cambridge - ecclesiuseucarius",
      "University of Chicago - konstantinkizito",
      "University of Indonesia - louisewilliam08",
      "University of Oxford - chankimtek325",
      "University of Pennsylvania - louwillscience",
      "University of Toronto - verethragnaaaa",
      "Yale University - nemesiusneophytus",
    ];

    // Warna segmen
    const dataColors = {
      "Australian National University - williamlouise215":"#BE830E",
      "Bandung Institute of Technology - williamlouise513":"#004DFF",
      "California Institute of Technology - ignatiusischyrion":"#FF6C0C",
      "Columbia University - louwillthefirst":"#B9D9EB",
      "Cornell University - lw080907":"#B31B1B",
      "Fudan University - verethragnazoroastrian":"#003B5C",
      "Gadjah Mada University - louisewilliamresearch":"#006F98",
      "Harvard University - dimitrideodatus":"#A41034",
      "Imperial College London - basiliusaloysius":"#400051",
      "Johns Hopkins University - qasimdostoevsky":"#002147",
      "King's College London - williamlouise087":"#E12726",
      "Massachusetts Institute of Technology - aaronlouwill":"#750014",
      "McGill University - theresavanhindenburg":"#ED1B2F",
      "Monash University - williamlouise624":"#006DAE",
      "Nanyang Technological University - kolamloak":"#D71440",
      "National University of Singapore - guoruyi08":"#F7BC60",
      "Paris Sciences et Lettres University - ulyssesulyanov":"#1E4697",
      "Peking University - louisewilliamcontact":"#94070A",
      "Princeton University - reveriusredemptus":"#EE7F2D",
      "Stanford University - censuriuscharlemagne":"#8C1515",
      "Swiss Federal Institute of Technology in Lausanne - oceanusophiuchus":"#FF0000",
      "Swiss Federal Institute of Technology in Zurich - flaviusfacio":"#215CAF",
      "Tarumanagara University - louwilluntarian":"#8B1C1C",
      "Technical University of Munich - polycarpusperegrinus":"#4889CE",
      "The Chinese University of Hong Kong - williamlouise482":"#750D6A",
      "The University of Edinburgh - williamlouise487":"#D50032",
      "The University of Hong Kong - jonatusjarlath":"#006F5F",
      "The University of Manchester - williamlouise562":"#660099",
      "The University of Melbourne - mailliwesiuolalfa":"#033F85",
      "The University of Melbourne - mailliwesiuolalfa":"#033F85",
      "The University of New South Wales - mailliwesiuolder":"#FFE600",
      "The University of Sydney - stanislavsylvester":"#C63B1E",
      "The University of Tokyo - williamlouise72":"#5BDEFF",
      "Tsinghua University - mailliwesiuol.01":"#671372",
      "University College London - hippolytushonoratus":"#500778",
      "University of California Berkeley - mailliwesiuol.02":"#003262",
      "University of Cambridge - ecclesiuseucarius":"#A3C1AD",
      "University of Chicago - konstantinkizito":"#800000",
      "University of Indonesia - louisewilliam08":"#FCDD19",
      "University of Oxford - chankimtek325":"#002147",
      "University of Pennsylvania - louwillscience":"#011F5B",
      "University of Toronto - verethragnaaaa":"#1E3765",
      "Yale University - nemesiusneophytus":"#00356B",
    };

    // ========== Three.js Setup ==========
    let scene, camera, renderer, controls;
    let segments = [];
    const sphereRadius = 1.5;
    const sphereSegments = 64;

    function init() {
      scene = new THREE.Scene();

      camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
      camera.position.z = 5;

      renderer = new THREE.WebGLRenderer({antialias:true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0xffffff);
      document.getElementById('canvas-container').appendChild(renderer.domElement);

      updateSphereSegments();

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.25;

      window.addEventListener('resize', onWindowResize, false);
      setupUI();
      animate();
    }

    function updateSphereSegments() {
      segments.forEach(segment => scene.remove(segment.mesh));
      segments = [];

      const dataCount = dataList.length;
      if (dataCount === 0) return;

      const anglePerSegment = (Math.PI*2) / dataCount;

      for (let i=0; i<dataCount; i++) {
        const data = dataList[i];
        const startAngle = i * anglePerSegment;

        const geometry = new THREE.SphereGeometry(
          sphereRadius, sphereSegments, sphereSegments,
          startAngle, anglePerSegment,
          0, Math.PI
        );

        const material = new THREE.MeshBasicMaterial({
          color: new THREE.Color(dataColors[data]),
          side: THREE.DoubleSide
        });

        const segment = new THREE.Mesh(geometry, material);
        scene.add(segment);

        segments.push({ mesh: segment, data: data });
      }
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }

    function setupUI() {
      const toggleButton = document.getElementById('toggle-button');
      const dataPanel = document.getElementById('data-panel');
      const searchInput = document.getElementById('search');
      const dataListElement = document.getElementById('data-list');

      dataList.forEach(data => {
        const li = document.createElement('li');
        li.textContent = data;
        li.addEventListener('click', () => {
          updateSphereSegments();
          dataPanel.style.display = 'none';
        });
        dataListElement.appendChild(li);
      });

      toggleButton.addEventListener('click', () => {
        if (dataPanel.style.display === 'block') {
          dataPanel.style.display = 'none';
          toggleButton.textContent = 'Show Data List';
        } else {
          dataPanel.style.display = 'block';
          toggleButton.textContent = 'Hide Data List';
        }
      });

      searchInput.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        Array.from(dataListElement.getElementsByTagName('li')).forEach(item => {
          item.style.display = item.textContent.toLowerCase().includes(term) ? 'block' : 'none';
        });
      });
    }

    // ========== Klik Segmen ==========
    let raycaster = new THREE.Raycaster();
    let mouse = new THREE.Vector2();

    function onDocumentClick(event) {
      event.preventDefault();
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
      raycaster.setFromCamera(mouse, camera);

      const intersects = raycaster.intersectObjects(segments.map(s => s.mesh));
      if (intersects.length > 0) {
        const clickedMesh = intersects[0].object;
        const clickedSegment = segments.find(s => s.mesh === clickedMesh);
        if (clickedSegment) {
          // redirect ke halaman dengan nama file = nama segmen
          window.location.href = `${clickedSegment.data}.html`;
        }
      }
    }
    window.addEventListener('click', onDocumentClick, false);
    // =================================

    init();
  </script>
</body>
</html>
